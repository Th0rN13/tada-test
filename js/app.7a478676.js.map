{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home.vue?dbba","webpack:///./src/components/Nav.vue?d9cf","webpack:///./src/App.vue","webpack:///./src/helpers/api.js","webpack:///./src/store/chat.js","webpack:///./src/components/Nav.vue","webpack:///./src/components/Nav.vue?ce9d","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Room.vue","webpack:///./src/components/InputLine.vue","webpack:///./src/components/InputLine.vue?f563","webpack:///./src/components/ScrollIcon.vue","webpack:///./src/components/ScrollIcon.vue?2605","webpack:///./src/components/RoomList.vue","webpack:///./src/components/RoomList.vue?d292","webpack:///./src/views/Room.vue?beee","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/InputLine.vue?70d4","webpack:///./src/components/RoomList.vue?1a0a","webpack:///./src/App.vue?280a","webpack:///./src/components/ScrollIcon.vue?7c4f","webpack:///./src/views/Room.vue?196c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","status","ws","server_url","process","VUE_APP_SERVER_URL","api_url","VUE_APP_API_URL","wss_url","VUE_APP_WSS_URL","getRooms","getRequest","getSettings","getRoomHistory","room","url","fetch","response","ok","Error","statusText","json","console","warn","connectWebSocket","connectCb","messageCb","onclose","close","WebSocket","onopen","setTimeout","onmessage","event","message","JSON","parse","err","sendMessage","text","id","send","stringify","store","Vuex","Store","state","username","localStorage","getItem","rooms","openedRooms","Set","messages","users","serverSettings","sendQueue","getters","roomMessages","findRoom","filter","roomQueue","mutations","removeDuplicateMessages","idx","arr","created","findIndex","msg","updateRooms","payload","updateRoomsMessage","find","last_message","updateRoomHistory","concat","updateSettings","settings","updateStatus","addToQueue","filterQueue","filterId","updateName","addOpenedRooms","add","createRoom","roomName","now","Date","toISOString","sender","actions","commit","trim","Number","isInteger","max_room_title_length","has","roomHistory","connectStatus","newSendMessage","uuid","max_message_length","max_username_length","setItem","tryRepeatSend","repeatId","el","clearMessage","connectStoreToChat","statusCb","dispatch","class","title","editNameMode","enterEditNameMode","type","placeholder","inputtedName","changeName","dontChangeName","editRoomMode","enterEditRoomMode","inputtedRoom","openRoom","dontOpenRoom","loading","props","setup","router","route","path","replace","then","newOpened","oldOpened","render","components","Nav","scroll","repeatSend","clearMsg","ref","lastItem","needScroll","scrollToDown","toggleScroll","line","toggle","emit","roomList","to","custom","href","navigate","InputLine","ScrollIcon","RoomList","loadNewRoom","scrollingNow","loadedRooms","scrollIntoView","flush","newRoom","nameChanged","storeUsername","change","target","gotoNewRoom","routes","component","Home","Room","createRouter","history","createWebHistory","app","createApp","App","use","mount"],"mappings":"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","file":"js/app.7a478676.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tada-test/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=e810aafa&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Nav.vue?vue&type=style&index=0&id=40de244c&lang=css\"","<template>\n\t<main>\n\t\t<Nav :status=\"status\" />\n\t\t<router-view />\n\t</main>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport { computed, watch } from 'vue';\nimport { connectStoreToChat } from '@/store/chat';\nimport Nav from '@/components/Nav.vue';\n\nexport default {\n\tname: 'App',\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst username = computed(() => store.state.username);\n\t\tconst status = computed(() => store.state.status === 'online');\n\n\t\twatch(username, () => {\n\t\t\tconnectStoreToChat(store, username.value);\n\t\t});\n\t\tconnectStoreToChat(store, username.value);\n\t\tstore.dispatch('getRooms');\n\t\tstore.dispatch('getSettings');\n\t\treturn {\n\t\t\tstatus,\n\t\t};\n\t},\n\tcomponents: {\n\t\tNav,\n\t},\n};\n</script>\n\n<style>\n*,\n*::after,\n*::before {\n\tbox-sizing: border-box;\n}\nbody {\n\tpadding: 0;\n\tmargin: 0;\n\theight: 100vh;\n}\n#app {\n\theight: 100%;\n}\nmain {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n</style>\n","const server_url = process.env.VUE_APP_SERVER_URL || 'nane.tada.team';\r\nconst api_url = process.env.VUE_APP_API_URL || `https://${server_url}/api/`;\r\nconst wss_url = process.env.VUE_APP_WSS_URL || `wss://${server_url}/ws`;\r\n\r\nexport async function getRooms() {\r\n\tconst result = await getRequest(`${api_url}rooms`);\r\n\treturn result;\r\n}\r\n\r\nexport async function getSettings() {\r\n\tconst result = await getRequest(`${api_url}settings`);\r\n\treturn result;\r\n}\r\n\r\nexport async function getRoomHistory(room) {\r\n\tconst result = await getRequest(`${api_url}rooms/${room}/history`);\r\n\treturn result;\r\n}\r\n\r\nasync function getRequest(url) {\r\n\ttry {\r\n\t\tconst response = await fetch(url);\r\n\t\tif (!response.ok) throw new Error(response.statusText);\r\n\t\tconst result = await response.json();\r\n\t\treturn result;\r\n\t} catch (err) {\r\n\t\tconsole.warn('Catch error:', err);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nlet ws;\r\n\r\nexport function connectWebSocket(name = 'anonymous', connectCb, messageCb) {\r\n\tif (ws) {\r\n\t\tws.onclose = () => {};\r\n\t\tws.close(1000, 'user change name');\r\n\t}\r\n\tws = new WebSocket(`${wss_url}?username=${name}`);\r\n\tws.onopen = () => {\r\n\t\tconnectCb(true);\r\n\t};\r\n\tws.onclose = () => {\r\n\t\tconnectCb(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tconnectWebSocket(name, connectCb, messageCb);\r\n\t\t}, 500);\r\n\t};\r\n\tws.onmessage = (event) => {\r\n\t\ttry {\r\n\t\t\tconst message = JSON.parse(event?.data);\r\n\t\t\tmessageCb(message);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.warn('Catch error:', err);\r\n\t\t}\r\n\t};\r\n\treturn ws;\r\n}\r\n\r\nexport function sendMessage(room, text, id) {\r\n\tws.send(JSON.stringify({ room, text, id }));\r\n}\r\n\r\nexport function ping() {\r\n\tws.send(JSON.stringify({ ping: true }));\r\n}\r\n","import Vuex from 'vuex';\r\nimport { v4 as uuid } from '@lukeed/uuid';\r\nimport {\r\n\tgetRooms,\r\n\tconnectWebSocket,\r\n\tgetSettings,\r\n\tgetRoomHistory,\r\n\tsendMessage,\r\n} from '@/helpers/api';\r\n\r\nexport const store = new Vuex.Store({\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tusername: localStorage.getItem('username') || 'anonymous',\r\n\t\t\trooms: [],\r\n\t\t\topenedRooms: new Set(),\r\n\t\t\tmessages: [],\r\n\t\t\tusers: [],\r\n\t\t\tserverSettings: {},\r\n\t\t\tstatus: 'offline',\r\n\t\t\tsendQueue: [],\r\n\t\t};\r\n\t},\r\n\tgetters: {\r\n\t\troomMessages: (state) => (findRoom) => {\r\n\t\t\treturn state.messages.filter(({ room }) => findRoom === room);\r\n\t\t},\r\n\t\troomQueue: (state) => (findRoom) => {\r\n\t\t\treturn state.sendQueue.filter(({ room }) => findRoom === room);\r\n\t\t},\r\n\t},\r\n\tmutations: {\r\n\t\tremoveDuplicateMessages(state) {\r\n\t\t\tstate.messages = state.messages.filter(\r\n\t\t\t\t({ created }, idx, arr) => idx === arr.findIndex((msg) => msg.created === created),\r\n\t\t\t);\r\n\t\t},\r\n\t\tupdateRooms(state, payload) {\r\n\t\t\tstate.rooms = payload;\r\n\t\t},\r\n\t\tupdateRoomsMessage(state, message) {\r\n\t\t\tif (message?.room) {\r\n\t\t\t\tconst findRoom = state.rooms.find(({ name }) => name === message?.room);\r\n\t\t\t\tif (findRoom) {\r\n\t\t\t\t\tfindRoom.last_message = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstate.rooms.push({ name: message?.room, last_message: message });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateRoomHistory(state, payload) {\r\n\t\t\tstate.messages = state.messages.concat(payload);\r\n\t\t},\r\n\t\tupdateSettings(state, payload) {\r\n\t\t\tstate.settings = payload;\r\n\t\t},\r\n\t\tupdateStatus(state, payload) {\r\n\t\t\tstate.status = payload ? 'online' : 'offline';\r\n\t\t},\r\n\t\tmessage(state, message) {\r\n\t\t\tstate.messages.push(message);\r\n\t\t},\r\n\t\taddToQueue(state, message) {\r\n\t\t\tstate.sendQueue.push(message);\r\n\t\t},\r\n\t\tfilterQueue(state, filterId) {\r\n\t\t\tstate.sendQueue = state.sendQueue.filter(({ id }) => id !== filterId);\r\n\t\t},\r\n\t\tupdateName(state, name) {\r\n\t\t\tstate.username = name;\r\n\t\t},\r\n\t\taddOpenedRooms(state, room) {\r\n\t\t\tstate.openedRooms.add(room);\r\n\t\t},\r\n\t\tcreateRoom(state, roomName) {\r\n\t\t\tconst now = new Date();\r\n\t\t\tstate.rooms.push({\r\n\t\t\t\tname: roomName,\r\n\t\t\t\tlast_message: {\r\n\t\t\t\t\troom: roomName,\r\n\t\t\t\t\tcreated: now.toISOString(),\r\n\t\t\t\t\tsender: { username: state.username },\r\n\t\t\t\t\ttext: `создал новую комнату`,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync getRooms(store) {\r\n\t\t\tconst rooms = await getRooms();\r\n\t\t\tstore.commit('updateRooms', rooms?.result);\r\n\t\t},\r\n\t\tasync getRoomHistory(store, room) {\r\n\t\t\tif (!room || !room.trim()) return;\r\n\t\t\tif (Number.isInteger(+store.state.settings?.max_room_title_length)) {\r\n\t\t\t\troom = room.slice(0, +store.state.settings?.max_room_title_length);\r\n\t\t\t}\r\n\t\t\tif (store.state.openedRooms.has(room)) return;\r\n\t\t\tstore.commit('addOpenedRooms', room);\r\n\t\t\tconst roomHistory = await getRoomHistory(room);\r\n\t\t\tif (roomHistory) {\r\n\t\t\t\tstore.commit('updateRoomHistory', roomHistory?.result);\r\n\t\t\t\tstore.commit('removeDuplicateMessages');\r\n\t\t\t}\r\n\t\t\treturn room;\r\n\t\t},\r\n\t\tasync getSettings(store) {\r\n\t\t\tconst settings = await getSettings();\r\n\t\t\tstore.commit('updateSettings', settings?.result);\r\n\t\t},\r\n\t\tasync connectStatus(store, status) {\r\n\t\t\tstore.commit('updateStatus', status);\r\n\t\t},\r\n\t\tasync message(store, message) {\r\n\t\t\tstore.commit('message', message);\r\n\t\t\tstore.commit('updateRoomsMessage', message);\r\n\t\t\tif (message.id) {\r\n\t\t\t\tstore.commit('filterQueue', message.id);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync newSendMessage(store, { text, room }) {\r\n\t\t\tif (!text || !text.trim() || !room || !room.trim()) return;\r\n\t\t\tconst id = uuid();\r\n\t\t\tif (\r\n\t\t\t\tNumber.isInteger(+store.state.settings?.max_message_length) &&\r\n\t\t\t\ttext.length > +store.state.settings?.max_message_length\r\n\t\t\t) {\r\n\t\t\t\ttext = text.slice(0, +store.state.settings?.max_message_length);\r\n\t\t\t}\r\n\t\t\tstore.commit('addToQueue', {\r\n\t\t\t\ttext,\r\n\t\t\t\troom,\r\n\t\t\t\tid,\r\n\t\t\t\tsender: { username: store.state.username },\r\n\t\t\t});\r\n\t\t\tsendMessage(room, text, id);\r\n\t\t},\r\n\t\tupdateName(store, name) {\r\n\t\t\tif (name && name.trim() && name.length <= store.state.settings?.max_username_length) {\r\n\t\t\t\tlocalStorage.setItem('username', name);\r\n\t\t\t\tstore.commit('updateName', name);\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\ttryRepeatSend(store, repeatId) {\r\n\t\t\tconst { id, room, text } = store.state.sendQueue.find((el) => el.id === repeatId);\r\n\t\t\tsendMessage(room, text, id);\r\n\t\t},\r\n\t\tclearMessage(store, id) {\r\n\t\t\tstore.commit('filterQueue', id);\r\n\t\t},\r\n\t\tcreateRoom(store, room) {\r\n\t\t\tif (!room || !room.trim()) return;\r\n\t\t\tif (Number.isInteger(+store.state.settings?.max_room_title_length)) {\r\n\t\t\t\troom = room.slice(0, +store.state.settings?.max_room_title_length);\r\n\t\t\t}\r\n\t\t\tstore.commit('createRoom', room);\r\n\t\t\treturn room;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport function connectStoreToChat(store, username) {\r\n\tfunction statusCb(status) {\r\n\t\tstore.dispatch('connectStatus', status);\r\n\t}\r\n\tfunction messageCb(message) {\r\n\t\tstore.dispatch('message', message);\r\n\t}\r\n\tconnectWebSocket(username, statusCb, messageCb);\r\n}\r\n","<template>\r\n\t<div class=\"nav\">\r\n\t\t<div class=\"name-wrapper\">\r\n\t\t\t<div v-if=\"!editNameMode\" class=\"name-change\" title=\"Кликните, чтобы поменять\">\r\n\t\t\t\t<div class=\"name-change-hint\">Ваше имя:</div>\r\n\t\t\t\t<b>{{ username }}</b>\r\n\t\t\t\t<button class=\"change-button\" @click=\"enterEditNameMode\">Поменять</button>\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"editNameMode\" class=\"input-name\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Введите имя\"\r\n\t\t\t\t\tv-model=\"inputtedName\"\r\n\t\t\t\t\t@keydown.enter=\"changeName\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button class=\"ok\" @click=\"changeName\">Поменять имя</button>\r\n\t\t\t\t<button class=\"cancel\" @click=\"dontChangeName\">x</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"room-wrapper\">\r\n\t\t\t<div v-if=\"!editRoomMode\" class=\"room-change\">\r\n\t\t\t\t{{ roomName }}\r\n\t\t\t\t<button class=\"change-button\" @click=\"enterEditRoomMode\">Создать новую</button>\r\n\t\t\t\t<input type=\"checkbox\" class=\"hidden\" v-model=\"editRoomMode\" />\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"editRoomMode\" class=\"input-room\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Введите название комнаты\"\r\n\t\t\t\t\tv-model=\"inputtedRoom\"\r\n\t\t\t\t\t@keydown.enter=\"openRoom\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button class=\"ok\" @click=\"openRoom\">Создать комнату</button>\r\n\t\t\t\t<button class=\"cancel\" @click=\"dontOpenRoom\">x</button>\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"loading\">loading...</div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"status\"\r\n\t\t\t\t:class=\"{ online: status }\"\r\n\t\t\t\t:title=\"`Connection status: ${status ? 'ok' : 'bad'}`\"\r\n\t\t\t></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, watch, ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter, useRoute } from 'vue-router';\r\n\r\nexport default {\r\n\tprops: ['status'],\r\n\tsetup() {\r\n\t\tconst router = useRouter();\r\n\t\tconst route = useRoute();\r\n\t\tconst store = useStore();\r\n\t\tconst openedRooms = computed(() => store.state.openedRooms);\r\n\t\tconst username = computed(() => store.state.username);\r\n\t\tconst roomName = computed(() => route.path.replace('/room/', ''));\r\n\t\tconst editNameMode = ref(false);\r\n\t\tconst inputtedName = ref(username.value);\r\n\t\tconst editRoomMode = ref(roomName.value === '/');\r\n\t\tconst inputtedRoom = ref('');\r\n\t\tconst loading = ref(false);\r\n\r\n\t\tconst enterEditNameMode = () => {\r\n\t\t\teditNameMode.value = true;\r\n\t\t};\r\n\r\n\t\tconst changeName = () => {\r\n\t\t\teditNameMode.value = false;\r\n\t\t\tloading.value = true;\r\n\t\t\tstore.dispatch('updateName', inputtedName.value).then((result) => {\r\n\t\t\t\tinputtedName.value = result;\r\n\t\t\t\tloading.value = false;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst dontChangeName = () => {\r\n\t\t\teditNameMode.value = false;\r\n\t\t};\r\n\r\n\t\tconst enterEditRoomMode = () => {\r\n\t\t\teditRoomMode.value = true;\r\n\t\t};\r\n\r\n\t\tconst openRoom = () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t\tstore.dispatch('createRoom', inputtedRoom.value).then((result) => {\r\n\t\t\t\tif (result) router.push(`/room/${result}`);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst dontOpenRoom = () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t};\r\n\r\n\t\twatch(openedRooms, (newOpened, oldOpened) => {\r\n\t\t\tif (!newOpened.has(roomName) && oldOpened.has(roomName)) {\r\n\t\t\t\trouter.push('/');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\twatch(roomName, () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\topenedRooms,\r\n\t\t\tclose,\r\n\t\t\tusername,\r\n\t\t\teditNameMode,\r\n\t\t\tinputtedName,\r\n\t\t\tchangeName,\r\n\t\t\tdontChangeName,\r\n\t\t\tloading,\r\n\t\t\teditRoomMode,\r\n\t\t\tinputtedRoom,\r\n\t\t\topenRoom,\r\n\t\t\tdontOpenRoom,\r\n\t\t\troomName,\r\n\t\t\tenterEditNameMode,\r\n\t\t\tenterEditRoomMode,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.name-change {\r\n\tcursor: pointer;\r\n}\r\n.hidden {\r\n\tdisplay: none;\r\n}\r\n.nav {\r\n\tflex: 0 0 48px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 0 24px;\r\n\tposition: relative;\r\n}\r\n.nav a {\r\n\tpadding: 8px;\r\n\tcolor: blue;\r\n\ttext-decoration: none;\r\n}\r\n.status {\r\n\tposition: absolute;\r\n\tright: 8px;\r\n\twidth: 24px;\r\n\theight: 24px;\r\n\ttop: calc(50% - 12px);\r\n\tborder-radius: 50%;\r\n\tbackground-color: red;\r\n}\r\n.status.online {\r\n\tbackground-color: greenyellow;\r\n}\r\n.link {\r\n\tpadding: 8px;\r\n\tborder-radius: 4px;\r\n}\r\n.router-link-exact-active {\r\n\tbackground-color: wheat;\r\n}\r\n.name-wrapper {\r\n\twidth: 400px;\r\n}\r\n.name-change {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n.name-change-hint {\r\n\tmargin-right: 8px;\r\n}\r\n.ok {\r\n\tcolor: green;\r\n}\r\n.cancel {\r\n\tcolor: red;\r\n}\r\n.change-button {\r\n\tmargin-left: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./Nav.vue?vue&type=template&id=40de244c\"\nimport script from \"./Nav.vue?vue&type=script&lang=js\"\nexport * from \"./Nav.vue?vue&type=script&lang=js\"\n\nimport \"./Nav.vue?vue&type=style&index=0&id=40de244c&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=d44cae56\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=d44cae56&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"wrap\">\r\n\t\t<RoomList />\r\n\t\t<div class=\"chat-wrap\">\r\n\t\t\t<div class=\"chat-messages\" @scroll=\"scroll\">\r\n\t\t\t\t<p v-if=\"!roomMessages.length\" class=\"hint\">В этой комнате еще нет сообщений</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tv-for=\"message in roomMessages\"\r\n\t\t\t\t\tclass=\"message\"\r\n\t\t\t\t\t:class=\"{ my_message: message?.sender?.username === username }\"\r\n\t\t\t\t\t:key=\"message.created\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<b>{{ message?.sender?.username || 'unknown' }}:</b>\r\n\t\t\t\t\t{{ message?.text }}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"hint\" v-if=\"roomQueue.length\">\r\n\t\t\t\t\tНе отправленные сообщения (сервер не подтвердил получение)\r\n\t\t\t\t</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tv-for=\"message in roomQueue\"\r\n\t\t\t\t\t:class=\"{ my_message: message?.sender?.username === username }\"\r\n\t\t\t\t\t:key=\"message.id\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<b>{{ message?.sender?.username || 'unknown' }}:</b>\r\n\t\t\t\t\t{{ message?.text }}\r\n\t\t\t\t\t<button @click=\"repeatSend(message.id)\">Повторить</button>\r\n\t\t\t\t\t<button @click=\"clearMsg(message.id)\">Удалить</button>\r\n\t\t\t\t</p>\r\n\t\t\t\t<span :ref=\"(el) => (lastItem = el)\"></span>\r\n\t\t\t</div>\r\n\t\t\t<InputLine :room=\"room\" />\r\n\t\t\t<ScrollIcon :needScroll=\"scrollToDown\" @toggle-scroll=\"toggleScroll\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref, watch } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport InputLine from '@/components/InputLine.vue';\r\nimport ScrollIcon from '@/components/ScrollIcon.vue';\r\nimport RoomList from '@/components/RoomList.vue';\r\n\r\nexport default {\r\n\tname: 'Room',\r\n\tprops: ['room'],\r\n\tcomponents: {\r\n\t\tInputLine,\r\n\t\tScrollIcon,\r\n\t\tRoomList,\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst router = useRouter();\r\n\t\tconst store = useStore();\r\n\t\tconst loadNewRoom = (roomName) => {\r\n\t\t\tstore.dispatch('getRoomHistory', roomName).then((result) => {\r\n\t\t\t\tif (result !== roomName) {\r\n\t\t\t\t\trouter.push(`/room/${result}`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tloadNewRoom(props.room);\r\n\r\n\t\tconst lastItem = ref(null);\r\n\t\tconst scrollToDown = ref(true);\r\n\t\tconst scrollingNow = ref(false);\r\n\r\n\t\tconst roomMessages = computed(() => store.getters.roomMessages(props.room));\r\n\t\tconst roomQueue = computed(() => store.getters.roomQueue(props.room));\r\n\t\tconst loadedRooms = computed(() => store.state.openedRooms);\r\n\t\tconst username = computed(() => store.state.username);\r\n\r\n\t\tconst toggleScroll = () => {\r\n\t\t\tlastItem.value.scrollIntoView(true);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tscrollToDown.value = true;\r\n\t\t\t}, 50);\r\n\t\t};\r\n\r\n\t\tconst scroll = () => {\r\n\t\t\tif (!scrollingNow.value) {\r\n\t\t\t\tscrollToDown.value = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst repeatSend = (id) => {\r\n\t\t\tstore.dispatch('tryRepeatSend', id);\r\n\t\t};\r\n\r\n\t\tconst clearMsg = (id) => {\r\n\t\t\tstore.dispatch('clearMessage', id);\r\n\t\t};\r\n\r\n\t\twatch(\r\n\t\t\t() => props.room,\r\n\t\t\t() => {\r\n\t\t\t\tif (!loadedRooms.value.has(props.room)) {\r\n\t\t\t\t\tloadNewRoom(props.room);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{ flush: 'post' },\r\n\t\t);\r\n\r\n\t\twatch(\r\n\t\t\t() => store.getters.roomMessages(props.room),\r\n\t\t\t() => {\r\n\t\t\t\tif (scrollToDown.value && lastItem?.value?.scrollIntoView) {\r\n\t\t\t\t\tscrollingNow.value = true;\r\n\t\t\t\t\tlastItem.value.scrollIntoView(true);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tscrollingNow.value = false;\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{ flush: 'post' },\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\troomMessages,\r\n\t\t\troomQueue,\r\n\t\t\tscrollToDown,\r\n\t\t\tlastItem,\r\n\t\t\ttoggleScroll,\r\n\t\t\tscroll,\r\n\t\t\tusername,\r\n\t\t\trepeatSend,\r\n\t\t\tclearMsg,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.wrap {\r\n\tdisplay: flex;\r\n\theight: calc(100% - 48px);\r\n}\r\n.chat-wrap {\r\n\theight: 100%;\r\n\tflex: 0 1 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n.chat-messages {\r\n\tflex: 0 1 100%;\r\n\toverflow-y: scroll;\r\n\tword-break: break-all;\r\n\tpadding: 8px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n.message {\r\n\tbackground: skyblue;\r\n\tborder-radius: 4px;\r\n\tpadding: 8px;\r\n\tmargin: 8px 40% 8px 0;\r\n}\r\n.message.my_message {\r\n\tmargin-left: 40%;\r\n\tmargin-right: 0;\r\n}\r\n.hint {\r\n\tbackground: rgba(245, 222, 179, 0.322);\r\n\ttext-align: center;\r\n\tcolor: gray;\r\n\tpadding: 0px;\r\n\tmargin: 8px 0;\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"input\">\r\n\t\t<input\r\n\t\t\tclass=\"send-input\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tv-model=\"line\"\r\n\t\t\t@keydown.enter=\"send\"\r\n\t\t\tplaceholder=\"Введите сообщение...\"\r\n\t\t/>\r\n\t\t<button class=\"send-button\" @click=\"send\">Отправить сообщение</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'InputLine',\r\n\tprops: ['room'],\r\n\tsetup(props) {\r\n\t\tconst store = useStore();\r\n\t\tconst line = ref('');\r\n\t\tconst send = () => {\r\n\t\t\tstore.dispatch('newSendMessage', { room: props.room, text: line.value });\r\n\t\t\tline.value = '';\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tline,\r\n\t\t\tsend,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.input {\r\n\tdisplay: flex;\r\n\tpadding: 0px;\r\n\tborder-top: 1px solid gray;\r\n}\r\n.send-input {\r\n\tpadding: 4px;\r\n\tmargin: 2px;\r\n\tflex: 1 0 320px;\r\n\twidth: 320px;\r\n}\r\n.send-button {\r\n\tpadding: 4px;\r\n\tmargin: 2px;\r\n\tflex: 0 0 200px;\r\n}\r\n</style>\r\n","import { render } from \"./InputLine.vue?vue&type=template&id=009e0383\"\nimport script from \"./InputLine.vue?vue&type=script&lang=js\"\nexport * from \"./InputLine.vue?vue&type=script&lang=js\"\n\nimport \"./InputLine.vue?vue&type=style&index=0&id=009e0383&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<button\r\n\t\tv-if=\"!needScroll\"\r\n\t\tclass=\"scroll-icon\"\r\n\t\t@click=\"toggle\"\r\n\t\ttitle=\"Прокручивать к новым сообщениям\"\r\n\t>\r\n\t\tv\r\n\t</button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'ScrollIcon',\r\n\tprops: ['needScroll'],\r\n\tsetup(props, { emit }) {\r\n\t\tconst toggle = () => {\r\n\t\t\temit('toggle-scroll');\r\n\t\t};\r\n\t\treturn {\r\n\t\t\ttoggle,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.scroll-icon {\r\n\tposition: absolute;\r\n\tborder-radius: 50%;\r\n\twidth: 48px;\r\n\theight: 48px;\r\n\tbackground-color: blue;\r\n\tcolor: white;\r\n\tborder: none;\r\n\tbottom: 40px;\r\n\tright: 24px;\r\n\tfont-size: 2.5em;\r\n\toutline: none;\r\n\tborder: 2px solid transparent;\r\n}\r\n.scroll-icon:active {\r\n\tborder: 2px solid rgb(0, 0, 151);\r\n}\r\n</style>\r\n","import { render } from \"./ScrollIcon.vue?vue&type=template&id=f63353de\"\nimport script from \"./ScrollIcon.vue?vue&type=script&lang=js\"\nexport * from \"./ScrollIcon.vue?vue&type=script&lang=js\"\n\nimport \"./ScrollIcon.vue?vue&type=style&index=0&id=f63353de&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"rooms-wrap\">\r\n\t\t<router-link\r\n\t\t\tv-for=\"room in roomList\"\r\n\t\t\t:key=\"room\"\r\n\t\t\t:to=\"`/room/${room.name}`\"\r\n\t\t\tcustom\r\n\t\t\tv-slot=\"{ href, navigate }\"\r\n\t\t>\r\n\t\t\t<a :href=\"href\" class=\"room\" @click=\"navigate\">\r\n\t\t\t\t<div class=\"room__title\">Комната: {{ room.name }}</div>\r\n\t\t\t\t<div class=\"room__last-message\">Последнее сообщение:</div>\r\n\t\t\t\t<div class=\"room__last-message\">\r\n\t\t\t\t\t<span class=\"room__last-author\">{{\r\n\t\t\t\t\t\troom?.last_message?.sender?.username || 'unknown'\r\n\t\t\t\t\t}}</span\r\n\t\t\t\t\t>:\r\n\t\t\t\t\t<span class=\"room__last-text\">{{ room?.last_message?.text }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t</router-link>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'RoomList',\r\n\tsetup() {\r\n\t\tconst store = useStore();\r\n\t\tconst roomList = computed(() => store.state.rooms);\r\n\r\n\t\treturn {\r\n\t\t\troomList,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.rooms-wrap {\r\n\tpadding: 0px;\r\n\tflex: 0 0 320px;\r\n\twidth: 320px;\r\n\tborder-right: 1px solid gray;\r\n\theight: 100%;\r\n\toverflow: auto;\r\n}\r\n.room {\r\n\ttext-decoration: none;\r\n\tcolor: inherit;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tpadding: 8px;\r\n\tcursor: pointer;\r\n\tborder-bottom: 1px solid gray;\r\n}\r\n.room:last-child {\r\n\tborder-bottom: none;\r\n}\r\n.room:hover {\r\n\tbackground-color: whitesmoke;\r\n}\r\n.room__title {\r\n\twidth: 100%;\r\n\tfont-weight: 700;\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n}\r\n.room__last-message {\r\n\twidth: 100%;\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n}\r\n.room__last-author {\r\n\tcolor: black;\r\n}\r\n.room__last-message {\r\n\tcolor: gray;\r\n}\r\n</style>\r\n","import { render } from \"./RoomList.vue?vue&type=template&id=59feb9a4\"\nimport script from \"./RoomList.vue?vue&type=script&lang=js\"\nexport * from \"./RoomList.vue?vue&type=script&lang=js\"\n\nimport \"./RoomList.vue?vue&type=style&index=0&id=59feb9a4&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Room.vue?vue&type=template&id=81267700\"\nimport script from \"./Room.vue?vue&type=script&lang=js\"\nexport * from \"./Room.vue?vue&type=script&lang=js\"\n\nimport \"./Room.vue?vue&type=style&index=0&id=81267700&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"wrap\">\r\n\t\t<RoomList />\r\n\r\n\t\t<!-- <div class=\"input-wrap\">\r\n\t\t<input\r\n\t\t\ttype=\"text\"\r\n\t\t\tplaceholder=\"Введите имя\"\r\n\t\t\t:value=\"username\"\r\n\t\t\t@change=\"change\"\r\n\t\t\t@keydown.enter=\"updateName\"\r\n\t\t/>\r\n\t\t<button @click=\"updateName\">Изменить имя</button>\r\n\t\t<span><b v-if=\"nameChanged\">Имя изменено</b></span>\r\n\t</div>\r\n\t<div class=\"input-wrap\">\r\n\t\t<input\r\n\t\t\tplaceholder=\"Введите название комнаты\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tv-model=\"newRoom\"\r\n\t\t\t@keydown.enter=\"gotoNewRoom\"\r\n\t\t/>\r\n\t\t<button @click=\"gotoNewRoom\">Создать новую комнату</button>\r\n\t</div> -->\r\n\t\t<div class=\"empty-room\">Выберите комнату</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport RoomList from '@/components/RoomList.vue';\r\n\r\nexport default {\r\n\tname: 'HomePage',\r\n\tcomponents: { RoomList },\r\n\tsetup() {\r\n\t\tconst store = useStore();\r\n\t\tconst router = useRouter();\r\n\t\tconst username = ref('');\r\n\t\tconst newRoom = ref('');\r\n\t\tconst nameChanged = ref(false);\r\n\t\tconst loading = ref(false);\r\n\t\tconst roomList = computed(() => store.state.rooms);\r\n\t\tconst storeUsername = computed(() => store.state.username);\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tusername.value = store.state.username;\r\n\t\t});\r\n\r\n\t\tconst updateName = () => {\r\n\t\t\tloading.value = true;\r\n\t\t\tstore.dispatch('updateName', username.value).then((result) => {\r\n\t\t\t\tloading.value = false;\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tusername.value = result;\r\n\t\t\t\t\tnameChanged.value = true;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnameChanged.value = false;\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tusername.value = storeUsername.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst change = ({ target: { value } }) => {\r\n\t\t\tusername.value = value;\r\n\t\t};\r\n\r\n\t\tconst gotoNewRoom = () => {\r\n\t\t\tif (newRoom.value.trim()) {\r\n\t\t\t\trouter.push(`/room/${newRoom.value}`);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tusername,\r\n\t\t\tupdateName,\r\n\t\t\troomList,\r\n\t\t\tchange,\r\n\t\t\tnameChanged,\r\n\t\t\tnewRoom,\r\n\t\t\tgotoNewRoom,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.input-wrap {\r\n\tpadding: 8px;\r\n}\r\n.input-wrap input {\r\n\tpadding: 4px;\r\n\twidth: 200px;\r\n\tmargin-right: 8px;\r\n}\r\n.input-wrap button {\r\n\tpadding: 4px;\r\n\twidth: 120px;\r\n}\r\n.empty-room {\r\n\tpadding: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./Home.vue?vue&type=template&id=e810aafa\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=e810aafa&lang=css\"\nscript.render = render\n\nexport default script","import { createWebHistory, createRouter } from 'vue-router';\r\nimport Room from '@/views/Room.vue';\r\nimport Home from '@/views/Home.vue';\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tname: 'Home',\r\n\t\tcomponent: Home,\r\n\t},\r\n\t{\r\n\t\tpath: '/room/:room',\r\n\t\tname: 'Room',\r\n\t\tcomponent: Room,\r\n\t\tprops: true,\r\n\t},\r\n];\r\n\r\nexport const router = createRouter({\r\n\thistory: createWebHistory(process.env.NODE_ENV === 'production' ? '/tada-test/' : '/'),\r\n\troutes,\r\n});\r\n","import { createApp } from 'vue';\nimport App from './App.vue';\n\nimport { store } from './store/chat';\nimport { router } from './router';\n\nconst app = createApp(App);\napp.use(store);\napp.use(router);\napp.mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InputLine.vue?vue&type=style&index=0&id=009e0383&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./RoomList.vue?vue&type=style&index=0&id=59feb9a4&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=d44cae56&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ScrollIcon.vue?vue&type=style&index=0&id=f63353de&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Room.vue?vue&type=style&index=0&id=81267700&lang=css\""],"sourceRoot":""}