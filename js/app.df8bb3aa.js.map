{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home.vue?dbba","webpack:///./src/App.vue","webpack:///./src/helpers/api.js","webpack:///./src/store/chat.js","webpack:///./src/components/Nav.vue","webpack:///./src/components/Nav.vue?ce9d","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Room.vue","webpack:///./src/components/InputLine.vue","webpack:///./src/components/InputLine.vue?f563","webpack:///./src/components/ScrollIcon.vue","webpack:///./src/components/ScrollIcon.vue?2605","webpack:///./src/components/RoomList.vue","webpack:///./src/components/TimeDate.vue","webpack:///./src/components/TimeDate.vue?e136","webpack:///./src/components/RoomList.vue?d292","webpack:///./src/views/Room.vue?beee","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/RoomList.vue?1d03","webpack:///./src/components/InputLine.vue?70d4","webpack:///./src/components/Nav.vue?1447","webpack:///./src/App.vue?280a","webpack:///./src/components/ScrollIcon.vue?7c4f","webpack:///./src/views/Room.vue?196c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","status","ws","server_url","process","VUE_APP_SERVER_URL","api_url","VUE_APP_API_URL","wss_url","VUE_APP_WSS_URL","getRooms","getRequest","getSettings","getRoomHistory","room","url","fetch","response","ok","Error","statusText","json","console","warn","connectWebSocket","connectCb","messageCb","onclose","close","WebSocket","onopen","setTimeout","onmessage","event","message","JSON","parse","err","sendMessage","text","id","send","stringify","ping","store","Vuex","Store","state","username","localStorage","getItem","rooms","openedRooms","Set","messages","users","serverSettings","sendQueue","pingStart","latency","timerId","undefined","getters","roomMessages","findRoom","filter","roomQueue","roomsSorted","sort","last_message","created","localeCompare","mutations","updateRooms","payload","updateRoomsMessage","find","updateRoomHistory","concat","updateSettings","settings","updateStatus","addToQueue","filterQueue","filterId","updateName","addOpenedRooms","add","createRoom","roomName","now","Date","toISOString","sender","pingEnd","clearTimeout","pingError","actions","commit","trim","Number","isInteger","max_room_title_length","has","roomHistory","connectStatus","pong","newSendMessage","uuid","max_message_length","max_username_length","setItem","tryRepeatSend","repeatId","el","clearMessage","updateLatency","connectStoreToChat","statusCb","dispatch","class","title","editNameMode","enterEditNameMode","type","placeholder","inputtedName","changeName","dontChangeName","editRoomMode","enterEditRoomMode","inputtedRoom","openRoom","dontOpenRoom","loading","props","setup","router","route","path","replace","then","interval","setInterval","clearInterval","newOpened","oldOpened","render","components","Nav","scroll","repeatSend","clearMsg","ref","lastItem","needScroll","scrollToDown","toggleScroll","line","toggle","emit","roomList","to","custom","href","navigate","date","today","yesterday","setDate","getDate","todayStr","toLocaleDateString","year","month","day","yesterdayStr","timeStr","toLocaleTimeString","hour","minute","dateStr","TimeDate","InputLine","ScrollIcon","RoomList","loadNewRoom","scrollingNow","loadedRooms","scrollIntoView","flush","newRoom","nameChanged","storeUsername","change","target","gotoNewRoom","routes","component","Home","Room","createRouter","history","createWebHistory","app","createApp","App","use","mount"],"mappings":"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","file":"js/app.df8bb3aa.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tada-test/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=e810aafa&lang=css\"","<template>\n\t<main>\n\t\t<Nav :status=\"status\" />\n\t\t<router-view />\n\t</main>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport { computed, watch } from 'vue';\nimport { connectStoreToChat } from '@/store/chat';\nimport Nav from '@/components/Nav.vue';\n\nexport default {\n\tname: 'App',\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst username = computed(() => store.state.username);\n\t\tconst status = computed(() => store.state.status === 'online');\n\n\t\twatch(username, () => {\n\t\t\tconnectStoreToChat(store, username.value);\n\t\t});\n\t\tconnectStoreToChat(store, username.value);\n\t\tstore.dispatch('getRooms');\n\t\tstore.dispatch('getSettings');\n\t\treturn {\n\t\t\tstatus,\n\t\t};\n\t},\n\tcomponents: {\n\t\tNav,\n\t},\n};\n</script>\n\n<style>\n*,\n*::after,\n*::before {\n\tbox-sizing: border-box;\n}\nbody {\n\tpadding: 0;\n\tmargin: 0;\n\theight: 100vh;\n}\n#app {\n\theight: 100%;\n}\nmain {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n</style>\n","const server_url = process.env.VUE_APP_SERVER_URL || 'nane.tada.team';\r\nconst api_url = process.env.VUE_APP_API_URL || `https://${server_url}/api/`;\r\nconst wss_url = process.env.VUE_APP_WSS_URL || `wss://${server_url}/ws`;\r\n\r\nexport async function getRooms() {\r\n\tconst result = await getRequest(`${api_url}rooms`);\r\n\treturn result;\r\n}\r\n\r\nexport async function getSettings() {\r\n\tconst result = await getRequest(`${api_url}settings`);\r\n\treturn result;\r\n}\r\n\r\nexport async function getRoomHistory(room) {\r\n\tconst result = await getRequest(`${api_url}rooms/${room}/history`);\r\n\treturn result;\r\n}\r\n\r\nasync function getRequest(url) {\r\n\ttry {\r\n\t\tconst response = await fetch(url);\r\n\t\tif (!response.ok) throw new Error(response.statusText);\r\n\t\tconst result = await response.json();\r\n\t\treturn result;\r\n\t} catch (err) {\r\n\t\tconsole.warn('Catch error:', err);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nlet ws;\r\n\r\nexport function connectWebSocket(name = 'anonymous', connectCb, messageCb) {\r\n\tif (ws) {\r\n\t\tws.onclose = () => {};\r\n\t\tws.close(1000, 'user change name');\r\n\t}\r\n\tws = new WebSocket(`${wss_url}?username=${name}`);\r\n\tws.onopen = () => {\r\n\t\tconnectCb(true);\r\n\t};\r\n\tws.onclose = () => {\r\n\t\tconnectCb(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tconnectWebSocket(name, connectCb, messageCb);\r\n\t\t}, 500);\r\n\t};\r\n\tws.onmessage = (event) => {\r\n\t\ttry {\r\n\t\t\tconst message = JSON.parse(event?.data);\r\n\t\t\tmessageCb(message);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.warn('Catch error:', err);\r\n\t\t}\r\n\t};\r\n\treturn ws;\r\n}\r\n\r\nexport function sendMessage(room, text, id) {\r\n\tws.send(JSON.stringify({ room, text, id }));\r\n}\r\n\r\nexport function ping() {\r\n\tws.send(JSON.stringify({ ping: true }));\r\n}\r\n","import Vuex from 'vuex';\r\nimport { v4 as uuid } from '@lukeed/uuid';\r\nimport {\r\n\tgetRooms,\r\n\tconnectWebSocket,\r\n\tgetSettings,\r\n\tgetRoomHistory,\r\n\tsendMessage,\r\n\tping,\r\n} from '@/helpers/api';\r\n\r\nexport const store = new Vuex.Store({\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tusername: localStorage.getItem('username') || 'anonymous',\r\n\t\t\trooms: [],\r\n\t\t\topenedRooms: new Set(),\r\n\t\t\tmessages: [],\r\n\t\t\tusers: [],\r\n\t\t\tserverSettings: {},\r\n\t\t\tstatus: 'offline',\r\n\t\t\tsendQueue: [],\r\n\t\t\tpingStart: 0,\r\n\t\t\tlatency: '-',\r\n\t\t\ttimerId: undefined,\r\n\t\t};\r\n\t},\r\n\tgetters: {\r\n\t\troomMessages: (state) => (findRoom) => {\r\n\t\t\treturn state.messages.filter(({ room }) => findRoom === room);\r\n\t\t},\r\n\t\troomQueue: (state) => (findRoom) => {\r\n\t\t\treturn state.sendQueue.filter(({ room }) => findRoom === room);\r\n\t\t},\r\n\t\troomsSorted: (state) => {\r\n\t\t\treturn state.rooms.sort((l, r) =>\r\n\t\t\t\tr?.last_message?.created.localeCompare(l?.last_message?.created),\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n\tmutations: {\r\n\t\tupdateRooms(state, payload) {\r\n\t\t\tstate.rooms = payload;\r\n\t\t},\r\n\t\tupdateRoomsMessage(state, message) {\r\n\t\t\tif (message?.room) {\r\n\t\t\t\tconst findRoom = state.rooms.find(({ name }) => name === message?.room);\r\n\t\t\t\tif (findRoom) {\r\n\t\t\t\t\tfindRoom.last_message = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstate.rooms.push({ name: message?.room, last_message: message });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateRoomHistory(state, payload) {\r\n\t\t\tstate.messages = state.messages.concat(payload);\r\n\t\t},\r\n\t\tupdateSettings(state, payload) {\r\n\t\t\tstate.settings = payload;\r\n\t\t},\r\n\t\tupdateStatus(state, payload) {\r\n\t\t\tstate.status = payload ? 'online' : 'offline';\r\n\t\t},\r\n\t\tmessage(state, message) {\r\n\t\t\tstate.messages.push(message);\r\n\t\t},\r\n\t\taddToQueue(state, message) {\r\n\t\t\tstate.sendQueue.push(message);\r\n\t\t},\r\n\t\tfilterQueue(state, filterId) {\r\n\t\t\tstate.sendQueue = state.sendQueue.filter(({ id }) => id !== filterId);\r\n\t\t},\r\n\t\tupdateName(state, name) {\r\n\t\t\tstate.username = name;\r\n\t\t},\r\n\t\taddOpenedRooms(state, room) {\r\n\t\t\tstate.openedRooms.add(room);\r\n\t\t},\r\n\t\tcreateRoom(state, roomName) {\r\n\t\t\tconst now = new Date();\r\n\t\t\tstate.rooms.push({\r\n\t\t\t\tname: roomName,\r\n\t\t\t\tlast_message: {\r\n\t\t\t\t\troom: roomName,\r\n\t\t\t\t\tcreated: now.toISOString(),\r\n\t\t\t\t\tsender: { username: state.username },\r\n\t\t\t\t\ttext: `создал новую комнату`,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tpingStart(state, timerId) {\r\n\t\t\tstate.pingStart = Date.now();\r\n\t\t\tstate.timerId = timerId;\r\n\t\t},\r\n\t\tpingEnd(state) {\r\n\t\t\tclearTimeout(state.timerId);\r\n\t\t\tstate.status = 'online';\r\n\t\t\tstate.latency = Date.now() - state.pingStart;\r\n\t\t},\r\n\t\tpingError(state) {\r\n\t\t\tstate.status = 'offline';\r\n\t\t\tstate.latency = 0;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync getRooms(store) {\r\n\t\t\tconst rooms = await getRooms();\r\n\t\t\tstore.commit('updateRooms', rooms?.result);\r\n\t\t},\r\n\t\tasync getRoomHistory(store, room) {\r\n\t\t\tif (!room || !room.trim()) return;\r\n\t\t\tif (Number.isInteger(+store.state.settings?.max_room_title_length)) {\r\n\t\t\t\troom = room.slice(0, +store.state.settings?.max_room_title_length);\r\n\t\t\t}\r\n\t\t\tif (store.state.openedRooms.has(room)) return;\r\n\t\t\tstore.commit('addOpenedRooms', room);\r\n\t\t\tconst roomHistory = await getRoomHistory(room);\r\n\t\t\tif (roomHistory) {\r\n\t\t\t\tstore.commit('updateRoomHistory', roomHistory?.result);\r\n\t\t\t}\r\n\t\t\treturn room;\r\n\t\t},\r\n\t\tasync getSettings(store) {\r\n\t\t\tconst settings = await getSettings();\r\n\t\t\tstore.commit('updateSettings', settings?.result);\r\n\t\t},\r\n\t\tasync connectStatus(store, status) {\r\n\t\t\tstore.commit('updateStatus', status);\r\n\t\t},\r\n\t\tasync message(store, message) {\r\n\t\t\tif (message.pong) {\r\n\t\t\t\tstore.commit('pingEnd');\r\n\t\t\t} else if (message.room && message.text && message.created && message.sender) {\r\n\t\t\t\tstore.commit('message', message);\r\n\t\t\t\tstore.commit('updateRoomsMessage', message);\r\n\t\t\t\tif (message.id) {\r\n\t\t\t\t\tstore.commit('filterQueue', message.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync newSendMessage(store, { text, room }) {\r\n\t\t\tif (!text || !text.trim() || !room || !room.trim()) return;\r\n\t\t\tconst id = uuid();\r\n\t\t\tif (\r\n\t\t\t\tNumber.isInteger(+store.state.settings?.max_message_length) &&\r\n\t\t\t\ttext.length > +store.state.settings?.max_message_length\r\n\t\t\t) {\r\n\t\t\t\ttext = text.slice(0, +store.state.settings?.max_message_length);\r\n\t\t\t}\r\n\t\t\tstore.commit('addToQueue', {\r\n\t\t\t\ttext,\r\n\t\t\t\troom,\r\n\t\t\t\tid,\r\n\t\t\t\tsender: { username: store.state.username },\r\n\t\t\t});\r\n\t\t\tsendMessage(room, text, id);\r\n\t\t},\r\n\t\tupdateName(store, name) {\r\n\t\t\tif (name && name.trim() && name.length <= store.state.settings?.max_username_length) {\r\n\t\t\t\tlocalStorage.setItem('username', name);\r\n\t\t\t\tstore.commit('updateName', name);\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\ttryRepeatSend(store, repeatId) {\r\n\t\t\tconst { id, room, text } = store.state.sendQueue.find((el) => el.id === repeatId);\r\n\t\t\tsendMessage(room, text, id);\r\n\t\t},\r\n\t\tclearMessage(store, id) {\r\n\t\t\tstore.commit('filterQueue', id);\r\n\t\t},\r\n\t\tcreateRoom(store, room) {\r\n\t\t\tif (!room || !room.trim()) return;\r\n\t\t\tif (Number.isInteger(+store.state.settings?.max_room_title_length)) {\r\n\t\t\t\troom = room.slice(0, +store.state.settings?.max_room_title_length);\r\n\t\t\t}\r\n\t\t\tstore.commit('createRoom', room);\r\n\t\t\treturn room;\r\n\t\t},\r\n\t\tupdateLatency(store) {\r\n\t\t\tconst timerId = setTimeout(() => {\r\n\t\t\t\tstore.commit('pingError');\r\n\t\t\t}, 1000);\r\n\t\t\tstore.commit('pingStart', timerId);\r\n\t\t\tping();\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport function connectStoreToChat(store, username) {\r\n\tfunction statusCb(status) {\r\n\t\tstore.dispatch('connectStatus', status);\r\n\t}\r\n\tfunction messageCb(message) {\r\n\t\tstore.dispatch('message', message);\r\n\t}\r\n\tconnectWebSocket(username, statusCb, messageCb);\r\n}\r\n","<template>\r\n\t<div class=\"nav\">\r\n\t\t<div class=\"name-wrapper\">\r\n\t\t\t<div v-if=\"!editNameMode\" class=\"name-change\" title=\"Кликните, чтобы поменять\">\r\n\t\t\t\t<div class=\"name-change-hint\">Ваше имя:</div>\r\n\t\t\t\t<b>{{ username }}</b>\r\n\t\t\t\t<button class=\"change-button\" @click=\"enterEditNameMode\">Поменять</button>\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"editNameMode\" class=\"input-name\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Введите имя\"\r\n\t\t\t\t\tv-model=\"inputtedName\"\r\n\t\t\t\t\t@keydown.enter=\"changeName\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button class=\"ok\" @click=\"changeName\">Поменять имя</button>\r\n\t\t\t\t<button class=\"cancel\" @click=\"dontChangeName\">x</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"room-wrapper\">\r\n\t\t\t<div v-if=\"!editRoomMode\" class=\"room-change\">\r\n\t\t\t\t{{ roomName }}\r\n\t\t\t\t<button class=\"change-button\" @click=\"enterEditRoomMode\">Создать новую</button>\r\n\t\t\t\t<input type=\"checkbox\" class=\"hidden\" v-model=\"editRoomMode\" />\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"editRoomMode\" class=\"input-room\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Введите название комнаты\"\r\n\t\t\t\t\tv-model=\"inputtedRoom\"\r\n\t\t\t\t\t@keydown.enter=\"openRoom\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button class=\"ok\" @click=\"openRoom\">Создать комнату</button>\r\n\t\t\t\t<button class=\"cancel\" @click=\"dontOpenRoom\">x</button>\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"loading\">loading...</div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"status\"\r\n\t\t\t\t:class=\"{ online: status }\"\r\n\t\t\t\t:title=\"`Connection status: ${status ? 'ok' : 'bad'}`\"\r\n\t\t\t>\r\n\t\t\t\t{{ status && `${latency}ms` }}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, watch, ref, onUnmounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter, useRoute } from 'vue-router';\r\n\r\nexport default {\r\n\tprops: ['status'],\r\n\tsetup() {\r\n\t\tconst router = useRouter();\r\n\t\tconst route = useRoute();\r\n\t\tconst store = useStore();\r\n\t\tconst openedRooms = computed(() => store.state.openedRooms);\r\n\t\tconst username = computed(() => store.state.username);\r\n\t\tconst roomName = computed(() => route.path.replace('/room/', ''));\r\n\t\tconst editNameMode = ref(false);\r\n\t\tconst inputtedName = ref(username.value);\r\n\t\tconst editRoomMode = ref(roomName.value === '/');\r\n\t\tconst inputtedRoom = ref('');\r\n\t\tconst loading = ref(false);\r\n\t\tconst latency = computed(() => store.state.latency);\r\n\r\n\t\tconst enterEditNameMode = () => {\r\n\t\t\teditNameMode.value = true;\r\n\t\t};\r\n\r\n\t\tconst changeName = () => {\r\n\t\t\teditNameMode.value = false;\r\n\t\t\tloading.value = true;\r\n\t\t\tstore.dispatch('updateName', inputtedName.value).then((result) => {\r\n\t\t\t\tinputtedName.value = result;\r\n\t\t\t\tloading.value = false;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst dontChangeName = () => {\r\n\t\t\teditNameMode.value = false;\r\n\t\t};\r\n\r\n\t\tconst enterEditRoomMode = () => {\r\n\t\t\teditRoomMode.value = true;\r\n\t\t};\r\n\r\n\t\tconst openRoom = () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t\tstore.dispatch('createRoom', inputtedRoom.value).then((result) => {\r\n\t\t\t\tif (result) router.push(`/room/${result}`);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst dontOpenRoom = () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t};\r\n\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tstore.dispatch('updateLatency');\r\n\t\t}, 1000);\r\n\r\n\t\tonUnmounted(() => {\r\n\t\t\tclearInterval(interval);\r\n\t\t});\r\n\r\n\t\twatch(openedRooms, (newOpened, oldOpened) => {\r\n\t\t\tif (!newOpened.has(roomName) && oldOpened.has(roomName)) {\r\n\t\t\t\trouter.push('/');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\twatch(roomName, () => {\r\n\t\t\teditRoomMode.value = false;\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\topenedRooms,\r\n\t\t\tclose,\r\n\t\t\tusername,\r\n\t\t\teditNameMode,\r\n\t\t\tinputtedName,\r\n\t\t\tchangeName,\r\n\t\t\tdontChangeName,\r\n\t\t\tloading,\r\n\t\t\teditRoomMode,\r\n\t\t\tinputtedRoom,\r\n\t\t\topenRoom,\r\n\t\t\tdontOpenRoom,\r\n\t\t\troomName,\r\n\t\t\tenterEditNameMode,\r\n\t\t\tenterEditRoomMode,\r\n\t\t\tlatency,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.name-change {\r\n\tcursor: pointer;\r\n}\r\n.hidden {\r\n\tdisplay: none;\r\n}\r\n.nav {\r\n\tflex: 0 0 48px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 0 24px;\r\n\tposition: relative;\r\n}\r\n.nav a {\r\n\tpadding: 8px;\r\n\tcolor: blue;\r\n\ttext-decoration: none;\r\n}\r\n.status {\r\n\tposition: absolute;\r\n\tright: 8px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n\ttop: calc(50% - 20px);\r\n\tborder-radius: 50%;\r\n\tbackground-color: red;\r\n\tcolor: red;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tfont-size: 12px;\r\n}\r\n.status.online {\r\n\tbackground-color: greenyellow;\r\n\tcolor: red;\r\n}\r\n.link {\r\n\tpadding: 8px;\r\n\tborder-radius: 4px;\r\n}\r\n.router-link-exact-active {\r\n\tbackground-color: wheat;\r\n}\r\n.name-wrapper {\r\n\twidth: 400px;\r\n}\r\n.name-change {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n.name-change-hint {\r\n\tmargin-right: 8px;\r\n}\r\n.cancel {\r\n\tcolor: red;\r\n}\r\n.change-button {\r\n\tmargin-left: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./Nav.vue?vue&type=template&id=c6b15c06\"\nimport script from \"./Nav.vue?vue&type=script&lang=js\"\nexport * from \"./Nav.vue?vue&type=script&lang=js\"\n\nimport \"./Nav.vue?vue&type=style&index=0&id=c6b15c06&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=d44cae56\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=d44cae56&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"wrap\">\r\n\t\t<RoomList />\r\n\t\t<div class=\"chat-wrap\">\r\n\t\t\t<div class=\"chat-messages\" @scroll=\"scroll\">\r\n\t\t\t\t<p v-if=\"!roomMessages.length\" class=\"hint\">В этой комнате еще нет сообщений</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tv-for=\"message in roomMessages\"\r\n\t\t\t\t\tclass=\"message\"\r\n\t\t\t\t\t:class=\"{ my_message: message?.sender?.username === username }\"\r\n\t\t\t\t\t:key=\"message.created\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<b>{{ message?.sender?.username || 'unknown' }}:</b>\r\n\t\t\t\t\t{{ message?.text }}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"hint\" v-if=\"roomQueue.length\">\r\n\t\t\t\t\tНе отправленные сообщения (сервер не подтвердил получение)\r\n\t\t\t\t</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tv-for=\"message in roomQueue\"\r\n\t\t\t\t\t:class=\"{ my_message: message?.sender?.username === username }\"\r\n\t\t\t\t\t:key=\"message.id\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<b>{{ message?.sender?.username || 'unknown' }}:</b>\r\n\t\t\t\t\t{{ message?.text }}\r\n\t\t\t\t\t<button @click=\"repeatSend(message.id)\">Повторить</button>\r\n\t\t\t\t\t<button @click=\"clearMsg(message.id)\">Удалить</button>\r\n\t\t\t\t</p>\r\n\t\t\t\t<span :ref=\"(el) => (lastItem = el)\"></span>\r\n\t\t\t</div>\r\n\t\t\t<InputLine :room=\"room\" />\r\n\t\t\t<ScrollIcon :needScroll=\"scrollToDown\" @toggle-scroll=\"toggleScroll\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref, watch } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport InputLine from '@/components/InputLine.vue';\r\nimport ScrollIcon from '@/components/ScrollIcon.vue';\r\nimport RoomList from '@/components/RoomList.vue';\r\n\r\nexport default {\r\n\tname: 'Room',\r\n\tprops: ['room'],\r\n\tcomponents: {\r\n\t\tInputLine,\r\n\t\tScrollIcon,\r\n\t\tRoomList,\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst router = useRouter();\r\n\t\tconst store = useStore();\r\n\t\tconst loadNewRoom = (roomName) => {\r\n\t\t\tstore.dispatch('getRoomHistory', roomName).then((result) => {\r\n\t\t\t\tif (result !== roomName) {\r\n\t\t\t\t\trouter.push(`/room/${result}`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tloadNewRoom(props.room);\r\n\r\n\t\tconst lastItem = ref(null);\r\n\t\tconst scrollToDown = ref(true);\r\n\t\tconst scrollingNow = ref(false);\r\n\r\n\t\tconst roomMessages = computed(() => store.getters.roomMessages(props.room));\r\n\t\tconst roomQueue = computed(() => store.getters.roomQueue(props.room));\r\n\t\tconst loadedRooms = computed(() => store.state.openedRooms);\r\n\t\tconst username = computed(() => store.state.username);\r\n\r\n\t\tconst toggleScroll = () => {\r\n\t\t\tlastItem.value.scrollIntoView(true);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tscrollToDown.value = true;\r\n\t\t\t}, 50);\r\n\t\t};\r\n\r\n\t\tconst scroll = () => {\r\n\t\t\tif (!scrollingNow.value) {\r\n\t\t\t\tscrollToDown.value = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst repeatSend = (id) => {\r\n\t\t\tstore.dispatch('tryRepeatSend', id);\r\n\t\t};\r\n\r\n\t\tconst clearMsg = (id) => {\r\n\t\t\tstore.dispatch('clearMessage', id);\r\n\t\t};\r\n\r\n\t\twatch(\r\n\t\t\t() => props.room,\r\n\t\t\t() => {\r\n\t\t\t\tif (!loadedRooms.value.has(props.room)) {\r\n\t\t\t\t\tloadNewRoom(props.room);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{ flush: 'post' },\r\n\t\t);\r\n\r\n\t\twatch(\r\n\t\t\t() => store.getters.roomMessages(props.room),\r\n\t\t\t() => {\r\n\t\t\t\tif (scrollToDown.value && lastItem?.value?.scrollIntoView) {\r\n\t\t\t\t\tscrollingNow.value = true;\r\n\t\t\t\t\tlastItem.value.scrollIntoView(true);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tscrollingNow.value = false;\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{ flush: 'post' },\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\troomMessages,\r\n\t\t\troomQueue,\r\n\t\t\tscrollToDown,\r\n\t\t\tlastItem,\r\n\t\t\ttoggleScroll,\r\n\t\t\tscroll,\r\n\t\t\tusername,\r\n\t\t\trepeatSend,\r\n\t\t\tclearMsg,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.wrap {\r\n\tdisplay: flex;\r\n\theight: calc(100% - 48px);\r\n}\r\n.chat-wrap {\r\n\theight: 100%;\r\n\tflex: 0 1 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n.chat-messages {\r\n\tflex: 0 1 100%;\r\n\toverflow-y: scroll;\r\n\tword-break: break-all;\r\n\tpadding: 8px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n.message {\r\n\tbackground: skyblue;\r\n\tborder-radius: 4px;\r\n\tpadding: 8px;\r\n\tmargin: 8px 40% 8px 0;\r\n}\r\n.message.my_message {\r\n\tmargin-left: 40%;\r\n\tmargin-right: 0;\r\n}\r\n.hint {\r\n\tbackground: rgba(245, 222, 179, 0.322);\r\n\ttext-align: center;\r\n\tcolor: gray;\r\n\tpadding: 0px;\r\n\tmargin: 8px 0;\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"input\">\r\n\t\t<input\r\n\t\t\tclass=\"send-input\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tv-model=\"line\"\r\n\t\t\t@keydown.enter=\"send\"\r\n\t\t\tplaceholder=\"Введите сообщение...\"\r\n\t\t/>\r\n\t\t<button class=\"send-button\" @click=\"send\">Отправить сообщение</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'InputLine',\r\n\tprops: ['room'],\r\n\tsetup(props) {\r\n\t\tconst store = useStore();\r\n\t\tconst line = ref('');\r\n\t\tconst send = () => {\r\n\t\t\tstore.dispatch('newSendMessage', { room: props.room, text: line.value });\r\n\t\t\tline.value = '';\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tline,\r\n\t\t\tsend,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.input {\r\n\tdisplay: flex;\r\n\tpadding: 0px;\r\n\tborder-top: 1px solid gray;\r\n}\r\n.send-input {\r\n\tpadding: 4px;\r\n\tmargin: 2px;\r\n\tflex: 1 0 320px;\r\n\twidth: 320px;\r\n}\r\n.send-button {\r\n\tpadding: 4px;\r\n\tmargin: 2px;\r\n\tflex: 0 0 200px;\r\n}\r\n</style>\r\n","import { render } from \"./InputLine.vue?vue&type=template&id=009e0383\"\nimport script from \"./InputLine.vue?vue&type=script&lang=js\"\nexport * from \"./InputLine.vue?vue&type=script&lang=js\"\n\nimport \"./InputLine.vue?vue&type=style&index=0&id=009e0383&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<button\r\n\t\tv-if=\"!needScroll\"\r\n\t\tclass=\"scroll-icon\"\r\n\t\t@click=\"toggle\"\r\n\t\ttitle=\"Прокручивать к новым сообщениям\"\r\n\t>\r\n\t\tv\r\n\t</button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'ScrollIcon',\r\n\tprops: ['needScroll'],\r\n\tsetup(props, { emit }) {\r\n\t\tconst toggle = () => {\r\n\t\t\temit('toggle-scroll');\r\n\t\t};\r\n\t\treturn {\r\n\t\t\ttoggle,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.scroll-icon {\r\n\tposition: absolute;\r\n\tborder-radius: 50%;\r\n\twidth: 48px;\r\n\theight: 48px;\r\n\tbackground-color: blue;\r\n\tcolor: white;\r\n\tborder: none;\r\n\tbottom: 40px;\r\n\tright: 24px;\r\n\tfont-size: 2.5em;\r\n\toutline: none;\r\n\tborder: 2px solid transparent;\r\n}\r\n.scroll-icon:active {\r\n\tborder: 2px solid rgb(0, 0, 151);\r\n}\r\n</style>\r\n","import { render } from \"./ScrollIcon.vue?vue&type=template&id=f63353de\"\nimport script from \"./ScrollIcon.vue?vue&type=script&lang=js\"\nexport * from \"./ScrollIcon.vue?vue&type=script&lang=js\"\n\nimport \"./ScrollIcon.vue?vue&type=style&index=0&id=f63353de&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"rooms-wrap\">\r\n\t\t<router-link\r\n\t\t\tv-for=\"room in roomList\"\r\n\t\t\t:key=\"room\"\r\n\t\t\t:to=\"`/room/${room.name}`\"\r\n\t\t\tcustom\r\n\t\t\tv-slot=\"{ href, navigate }\"\r\n\t\t>\r\n\t\t\t<a :href=\"href\" class=\"room\" @click=\"navigate\">\r\n\t\t\t\t<div class=\"room__title\">Комната: {{ room.name }}</div>\r\n\t\t\t\t<div class=\"room__last-message\">\r\n\t\t\t\t\tПоследнее сообщение:\r\n\t\t\t\t\t<span class=\"room__last-author\">\r\n\t\t\t\t\t\t<TimeDate :date=\"room?.last_message?.created\" />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"room__last-message\">\r\n\t\t\t\t\t<span class=\"room__last-author\">{{\r\n\t\t\t\t\t\troom?.last_message?.sender?.username || 'unknown'\r\n\t\t\t\t\t}}</span\r\n\t\t\t\t\t>:\r\n\t\t\t\t\t<span class=\"room__last-text\">{{ room?.last_message?.text }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t</router-link>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport TimeDate from './TimeDate.vue';\r\n\r\nexport default {\r\n\tname: 'RoomList',\r\n\tcomponents: { TimeDate },\r\n\tsetup() {\r\n\t\tconst store = useStore();\r\n\t\tconst roomList = computed(() => store.getters.roomsSorted);\r\n\r\n\t\treturn {\r\n\t\t\troomList,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.rooms-wrap {\r\n\tpadding: 0px;\r\n\tflex: 0 0 320px;\r\n\twidth: 320px;\r\n\tborder-right: 1px solid gray;\r\n\theight: 100%;\r\n\toverflow: auto;\r\n}\r\n.room {\r\n\ttext-decoration: none;\r\n\tcolor: inherit;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tpadding: 8px;\r\n\tcursor: pointer;\r\n\tborder-bottom: 1px solid gray;\r\n}\r\n.room:last-child {\r\n\tborder-bottom: none;\r\n}\r\n.room:hover {\r\n\tbackground-color: whitesmoke;\r\n}\r\n.room__title {\r\n\twidth: 100%;\r\n\tfont-weight: 700;\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n}\r\n.room__last-message {\r\n\twidth: 100%;\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n}\r\n.room__last-author {\r\n\tcolor: black;\r\n}\r\n.room__last-message {\r\n\tcolor: gray;\r\n}\r\n</style>\r\n","<template>\r\n\t{{ result }}\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\n\r\nexport default {\r\n\tname: 'TimeDate',\r\n\tprops: ['date'],\r\n\tsetup(props) {\r\n\t\tconst today = new Date();\r\n\t\tconst yesterday = new Date();\r\n\t\tyesterday.setDate(yesterday.getDate() - 1);\r\n\t\tconst todayStr = today.toLocaleDateString('ru', {\r\n\t\t\tyear: '2-digit',\r\n\t\t\tmonth: '2-digit',\r\n\t\t\tday: '2-digit',\r\n\t\t});\r\n\t\tconst yesterdayStr = yesterday.toLocaleDateString('ru', {\r\n\t\t\tyear: '2-digit',\r\n\t\t\tmonth: '2-digit',\r\n\t\t\tday: '2-digit',\r\n\t\t});\r\n\r\n\t\tconst result = computed(() => {\r\n\t\t\tconst date = new Date(props.date);\r\n\t\t\tconst timeStr = date.toLocaleTimeString('ru', {\r\n\t\t\t\thour: '2-digit',\r\n\t\t\t\tminute: '2-digit',\r\n\t\t\t});\r\n\t\t\tconst dateStr = date.toLocaleDateString('ru', {\r\n\t\t\t\tyear: '2-digit',\r\n\t\t\t\tmonth: '2-digit',\r\n\t\t\t\tday: '2-digit',\r\n\t\t\t});\r\n\t\t\tif (todayStr === dateStr) return timeStr;\r\n\t\t\treturn yesterdayStr === dateStr ? 'Вчера' : dateStr;\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tresult,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n","import { render } from \"./TimeDate.vue?vue&type=template&id=7e59edf4\"\nimport script from \"./TimeDate.vue?vue&type=script&lang=js\"\nexport * from \"./TimeDate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./RoomList.vue?vue&type=template&id=569c4319\"\nimport script from \"./RoomList.vue?vue&type=script&lang=js\"\nexport * from \"./RoomList.vue?vue&type=script&lang=js\"\n\nimport \"./RoomList.vue?vue&type=style&index=0&id=569c4319&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Room.vue?vue&type=template&id=81267700\"\nimport script from \"./Room.vue?vue&type=script&lang=js\"\nexport * from \"./Room.vue?vue&type=script&lang=js\"\n\nimport \"./Room.vue?vue&type=style&index=0&id=81267700&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"wrap\">\r\n\t\t<RoomList />\r\n\r\n\t\t<!-- <div class=\"input-wrap\">\r\n\t\t<input\r\n\t\t\ttype=\"text\"\r\n\t\t\tplaceholder=\"Введите имя\"\r\n\t\t\t:value=\"username\"\r\n\t\t\t@change=\"change\"\r\n\t\t\t@keydown.enter=\"updateName\"\r\n\t\t/>\r\n\t\t<button @click=\"updateName\">Изменить имя</button>\r\n\t\t<span><b v-if=\"nameChanged\">Имя изменено</b></span>\r\n\t</div>\r\n\t<div class=\"input-wrap\">\r\n\t\t<input\r\n\t\t\tplaceholder=\"Введите название комнаты\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tv-model=\"newRoom\"\r\n\t\t\t@keydown.enter=\"gotoNewRoom\"\r\n\t\t/>\r\n\t\t<button @click=\"gotoNewRoom\">Создать новую комнату</button>\r\n\t</div> -->\r\n\t\t<div class=\"empty-room\">Выберите комнату</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport RoomList from '@/components/RoomList.vue';\r\n\r\nexport default {\r\n\tname: 'HomePage',\r\n\tcomponents: { RoomList },\r\n\tsetup() {\r\n\t\tconst store = useStore();\r\n\t\tconst router = useRouter();\r\n\t\tconst username = ref('');\r\n\t\tconst newRoom = ref('');\r\n\t\tconst nameChanged = ref(false);\r\n\t\tconst loading = ref(false);\r\n\t\tconst roomList = computed(() => store.state.rooms);\r\n\t\tconst storeUsername = computed(() => store.state.username);\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tusername.value = store.state.username;\r\n\t\t});\r\n\r\n\t\tconst updateName = () => {\r\n\t\t\tloading.value = true;\r\n\t\t\tstore.dispatch('updateName', username.value).then((result) => {\r\n\t\t\t\tloading.value = false;\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tusername.value = result;\r\n\t\t\t\t\tnameChanged.value = true;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnameChanged.value = false;\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tusername.value = storeUsername.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst change = ({ target: { value } }) => {\r\n\t\t\tusername.value = value;\r\n\t\t};\r\n\r\n\t\tconst gotoNewRoom = () => {\r\n\t\t\tif (newRoom.value.trim()) {\r\n\t\t\t\trouter.push(`/room/${newRoom.value}`);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tusername,\r\n\t\t\tupdateName,\r\n\t\t\troomList,\r\n\t\t\tchange,\r\n\t\t\tnameChanged,\r\n\t\t\tnewRoom,\r\n\t\t\tgotoNewRoom,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.input-wrap {\r\n\tpadding: 8px;\r\n}\r\n.input-wrap input {\r\n\tpadding: 4px;\r\n\twidth: 200px;\r\n\tmargin-right: 8px;\r\n}\r\n.input-wrap button {\r\n\tpadding: 4px;\r\n\twidth: 120px;\r\n}\r\n.empty-room {\r\n\tpadding: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./Home.vue?vue&type=template&id=e810aafa\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=e810aafa&lang=css\"\nscript.render = render\n\nexport default script","import { createWebHistory, createRouter } from 'vue-router';\r\nimport Room from '@/views/Room.vue';\r\nimport Home from '@/views/Home.vue';\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tname: 'Home',\r\n\t\tcomponent: Home,\r\n\t},\r\n\t{\r\n\t\tpath: '/room/:room',\r\n\t\tname: 'Room',\r\n\t\tcomponent: Room,\r\n\t\tprops: true,\r\n\t},\r\n];\r\n\r\nexport const router = createRouter({\r\n\thistory: createWebHistory(process.env.NODE_ENV === 'production' ? '/tada-test/' : '/'),\r\n\troutes,\r\n});\r\n","import { createApp } from 'vue';\nimport App from './App.vue';\n\nimport { store } from './store/chat';\nimport { router } from './router';\n\nconst app = createApp(App);\napp.use(store);\napp.use(router);\napp.mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./RoomList.vue?vue&type=style&index=0&id=569c4319&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InputLine.vue?vue&type=style&index=0&id=009e0383&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Nav.vue?vue&type=style&index=0&id=c6b15c06&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=d44cae56&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ScrollIcon.vue?vue&type=style&index=0&id=f63353de&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Room.vue?vue&type=style&index=0&id=81267700&lang=css\""],"sourceRoot":""}